<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>你能在零下50度中活下來嗎？</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* 冰藍漸層背景 */
    body {
      background: linear-gradient(135deg, #d0e7f9 0%, #a4c8f0 70%, #5a8fd6 100%);
      position: relative;
      overflow-x: hidden;
    }
    /* 雪花動畫 */
    @keyframes snowFall {
      0% {
        transform: translateY(-10px) translateX(0);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) translateX(20px);
        opacity: 0;
      }
    }
    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      font-size: 1.5rem;
      user-select: none;
      pointer-events: none;
      animation-name: snowFall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      z-index: 9999;
    }
    /* 問題卡片風格 */
    #quiz > div {
      background: rgba(255 255 255 / 0.15);
      border-radius: 0.75rem;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 0 15px rgba(255 255 255 / 0.3);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255 255 255 / 0.3);
      transition: box-shadow 0.3s ease;
    }
    #quiz > div:hover {
      box-shadow: 0 0 25px rgba(255 255 255 / 0.6);
    }
    /* 按鈕冰藍風格 */
    #submitBtn {
      background: linear-gradient(135deg, #6cb4ee, #3b82f6);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }
    #submitBtn:hover {
      background: linear-gradient(135deg, #4a8dde, #2563eb);
      box-shadow: 0 6px 25px rgba(37, 99, 235, 0.8);
    }
    #submitBtn:disabled {
      background: #93c5fd;
      box-shadow: none;
      cursor: not-allowed;
    }
    /* 結果區域字體顏色偏冷 */
    #result h2,
    #result p {
      color: #e0f2fe;
      text-shadow: 0 0 5px #3b82f6;
    }
  </style>
</head>
<body class="bg-blue-50 text-gray-800 font-sans relative">
  <!-- 背景風聲 -->
  <audio autoplay loop>
    <source src="wind.mp3.mp3" type="audio/mpeg">
    您的瀏覽器不支援音訊播放。
  </audio>

  <!-- 雪花容器 -->
  <div id="snow-container"></div>

  <div class="max-w-xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4 text-center text-white">你能在零下50度中活下來嗎？</h1>
    <div id="quiz"></div>
    <button id="submitBtn" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 hidden">查看結果</button>
    <div id="result" class="mt-6 hidden">
      <h2 class="text-2xl font-semibold mb-2 text-white">你的求生人格</h2>
      <canvas id="radarChart" width="400" height="400"></canvas>
      <p id="typeText" class="mt-4 text-lg text-white"></p>
    </div>
  </div>

  <script>
    // 雪花動畫
    const snowContainer = document.getElementById('snow-container');
    for (let i = 0; i < 100; i++) {
      const snowflake = document.createElement('div');
      snowflake.classList.add('snowflake');
      snowflake.style.left = Math.random() * window.innerWidth + 'px';
      snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
      snowflake.style.opacity = Math.random();
      snowContainer.appendChild(snowflake);
    }

    const questions = [
      {
        text: "你發現氣溫已降到零下五十度，你會？",
        options: [
          { text: "按計畫出發，我相信自己判斷", score: { I: 1, T: 1 } },
          { text: "改變計畫，等有人陪我再出發", score: { F: 1, J: 1 } },
          { text: "想太多會拖慢進度，先走再說", score: { E: 1, P: 1 } },
          { text: "決定不出發，等待天氣回暖", score: { S: 1, J: 1 } }
        ]
      },
       {
        text: "途中你掉進冰水裡，衣服濕透，你會？",
        options: [
          { text: "尋找風小的地方升火取暖。", score: { J: 1, S: 1 } },
          { text: "原地立刻升火，時間就是生命。", score: { P: 1, T: 1 } },
          { text: "靠快速行走和運動取暖。", score: { E: 1, S: 1 } },
          { text: "回頭找先前見過的庇護處。", score: { I: 1, J: 1 } }
        ]
      },
      {
        text: "火被雪熄滅了，你冷到發抖，這時你會？",
        options: [
          { text: "堅持再試一次升火。", score: { J: 1, T: 1 } },
          { text: "快速檢查是否有其他保暖物資。", score: { S: 1, T: 1 } },
          { text: "回憶溫暖的記憶，希望振作起來。", score: { N: 1, I: 1 } },
          { text: "呼喚遠方的狗，希望牠能幫你取暖。", score: { F: 1, N: 1 } }
        ]
      },
      {
        text: "你的手已幾乎凍傷，無法靈活活動，你？",
        options: [
          { text: "用牙齒試圖點火，堅持到底。", score: { T: 1, J: 1 } },
          { text: "憑意志力回顧人生過往，希望平靜接受。", score: { N: 1, I: 1 } },
          { text: "大叫並奔跑，希望身體暖起來。", score: { E: 1, F: 1 } },
          { text: "改變計畫，找最近的安全地點求援。", score: { S: 1, P: 1 } }
        ]
      },
      {
        text: "你明白這可能是最後一次機會，你會？",
        options: [
          { text: "靜靜等待，希望有人經過救你。", score: { I: 1, N: 1 } },
          { text: "再次點火，咬牙撐下去。", score: { T: 1, J: 1 } },
          { text: "靠近動物或任何熱源取暖。", score: { F: 1, S: 1 } },
          { text: "一步步前進，哪怕只剩最後一絲力氣。", score: { E: 1, P: 1 } }
        ]
      }
    ];

    const quizDiv = document.getElementById('quiz');
    const submitBtn = document.getElementById('submitBtn');
    const resultDiv = document.getElementById('result');
    const typeText = document.getElementById('typeText');
    const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

    questions.forEach((q, i) => {
      const qDiv = document.createElement('div');
      qDiv.className = 'mb-4';
      qDiv.innerHTML = `<p class="font-semibold text-white">${i + 1}. ${q.text}</p>`;
      q.options.forEach((opt, j) => {
        const id = `q${i}_opt${j}`;
        qDiv.innerHTML += `
          <div>
            <input type="radio" name="q${i}" id="${id}" value="${j}" class="mr-2">
            <label for="${id}" class="text-white">${opt.text}</label>
          </div>`;
      });
      quizDiv.appendChild(qDiv);
    });

    quizDiv.addEventListener('change', (e) => {
      if (e.target && e.target.tagName === 'INPUT') {
        e.target.parentElement.classList.add('crack');
        setTimeout(() => {
          e.target.parentElement.classList.remove('crack');
        }, 500);
      }

      const allAnswered = questions.every((_, i) => {
        return document.querySelector(`input[name='q${i}']:checked`);
      });
      submitBtn.classList.toggle('hidden', !allAnswered);
    });

    submitBtn.addEventListener('click', () => {
      questions.forEach((q, i) => {
        const choice = document.querySelector(`input[name='q${i}']:checked`).value;
        const scoreObj = q.options[choice].score;
        for (const key in scoreObj) {
          scores[key] += scoreObj[key];
        }
      });

      const labels = ['E/I', 'S/N', 'T/F', 'J/P'];
      const radarData = {
        labels,
        datasets: [{
          label: 'MBTI 傾向',
          data: [
            scores.E - scores.I,
            scores.S - scores.N,
            scores.T - scores.F,
            scores.J - scores.P
          ].map(x => (x + 3) * 10),
          backgroundColor: 'rgba(59, 130, 246, 0.2)',
          borderColor: 'rgba(59, 130, 246, 1)',
          borderWidth: 2
        }]
      };

      new Chart(document.getElementById('radarChart'), {
        type: 'radar',
        data: radarData,
        options: {
          scales: {
            r: {
              suggestedMin: 0,
              suggestedMax: 60
            }
          }
        }
      });

      const type = `${scores.I > scores.E ? 'I' : 'E'}${scores.S > scores.N ? 'S' : 'N'}${scores.T > scores.F ? 'T' : 'F'}${scores.J > scores.P ? 'J' : 'P'}`;
      let personality = '';
      // 根據 MBTI 類型給予冒險型或保守型的標籤
      if (type === 'ESTP' || type === 'ENTP' || type === 'ENFP') {
        personality = '冒險型';
      } else if (type === 'ISTJ' || type === 'ISFJ' || type === 'INFJ') {
        personality = '保守型';
      } else {
        personality = '平衡型';
      }

      typeText.innerText = `你的 MBTI 傾向是 ${type}，屬於 ${personality}`;

      resultDiv.classList.remove('hidden');
      submitBtn.disabled = true;
    });
  </script>
</body>
</html>
