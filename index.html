<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä½ èƒ½åœ¨é›¶ä¸‹50åº¦ä¸­æ´»ä¸‹ä¾†å—ï¼Ÿ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(to bottom, #cfe5f5, #e0f7fa);
      background-image: url('https://images.unsplash.com/photo-1608889175763-929dbf8dfe68?auto=format&fit=crop&w=1470&q=80');
      background-size: cover;
      background-attachment: fixed;
      background-position: center;
    }
    .snow {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
  </style>
</head>
<body class="bg-blue-50/80 text-gray-800 font-sans relative">
  <canvas class="snow"></canvas>
  <div class="max-w-xl mx-auto p-4 bg-white/80 rounded-xl shadow-lg z-10 relative">
    <h1 class="text-3xl font-bold mb-4 text-center">ä½ èƒ½åœ¨é›¶ä¸‹50åº¦ä¸­æ´»ä¸‹ä¾†å—ï¼Ÿ</h1>
    <div id="quiz"></div>
    <button id="submitBtn" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 hidden">æŸ¥çœ‹çµæœ</button>
    <div id="result" class="mt-6 hidden">
      <h2 class="text-2xl font-semibold mb-2">ä½ çš„æ±‚ç”Ÿäººæ ¼</h2>
      <canvas id="radarChart" width="400" height="400"></canvas>
      <p id="typeText" class="mt-4 text-lg whitespace-pre-line"></p>
    </div>
  </div>

  <script>
    const questions = [
      {
        text: "ä½ ç™¼ç¾æ°£æº«é™åˆ°é›¶ä¸‹50åº¦ï¼Œç¨è‡ªä¸€äººæº–å‚™å•Ÿç¨‹ï¼Œä½ æœƒï¼Ÿ",
        options: [
          { text: "ä¾ç…§åŸå®šè¨ˆç•«å‡ºç™¼ï¼Œç›¸ä¿¡è‡ªå·±çš„æº–å‚™è¶³å¤ ã€‚", score: { I: 1, T: 1 } },
          { text: "é€šçŸ¥æœ‹å‹å¾Œç­‰å¾…å¤¥ä¼´åŒè¡Œã€‚", score: { F: 1, J: 1 } },
          { text: "ç›´æ¥å‡ºç™¼ï¼Œé‚Šèµ°é‚Šçœ‹æƒ…æ³æ‡‰è®Šã€‚", score: { E: 1, P: 1 } },
          { text: "è¦ºå¾—é€™å¤©æ°£å¤ªå±éšªï¼Œæ±ºå®šä¸å‡ºç™¼ã€‚", score: { I: 1, S: 1 } }
        ]
      },
      {
        text: "é€”ä¸­ä½ æ‰é€²å†°æ°´è£¡ï¼Œè¡£æœæ¿•é€ï¼Œä½ æœƒï¼Ÿ",
        options: [
          { text: "å°‹æ‰¾é¢¨å°çš„åœ°æ–¹å‡ç«å–æš–ã€‚", score: { J: 1, S: 1 } },
          { text: "åŸåœ°ç«‹åˆ»å‡ç«ï¼Œæ™‚é–“å°±æ˜¯ç”Ÿå‘½ã€‚", score: { P: 1, T: 1 } },
          { text: "é å¿«é€Ÿè¡Œèµ°å’Œé‹å‹•å–æš–ã€‚", score: { E: 1, S: 1 } },
          { text: "å›é ­æ‰¾å…ˆå‰è¦‹éçš„åº‡è­·è™•ã€‚", score: { I: 1, J: 1 } }
        ]
      },
      {
        text: "ç«è¢«é›ªç†„æ»…äº†ï¼Œä½ å†·åˆ°ç™¼æŠ–ï¼Œé€™æ™‚ä½ æœƒï¼Ÿ",
        options: [
          { text: "å …æŒå†è©¦ä¸€æ¬¡å‡ç«ã€‚", score: { J: 1, T: 1 } },
          { text: "å¿«é€Ÿæª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–ä¿æš–ç‰©è³‡ã€‚", score: { S: 1, T: 1 } },
          { text: "å›æ†¶æº«æš–çš„è¨˜æ†¶ï¼Œå¸Œæœ›æŒ¯ä½œèµ·ä¾†ã€‚", score: { N: 1, I: 1 } },
          { text: "å‘¼å–šé æ–¹çš„ç‹—ï¼Œå¸Œæœ›ç‰ èƒ½å¹«ä½ å–æš–ã€‚", score: { F: 1, N: 1 } }
        ]
      },
      {
        text: "ä½ çš„æ‰‹å·²å¹¾ä¹å‡å‚·ï¼Œç„¡æ³•éˆæ´»æ´»å‹•ï¼Œä½ ï¼Ÿ",
        options: [
          { text: "ç”¨ç‰™é½’è©¦åœ–é»ç«ï¼Œå …æŒåˆ°åº•ã€‚", score: { T: 1, J: 1 } },
          { text: "æ†‘æ„å¿—åŠ›å›é¡§äººç”Ÿéå¾€ï¼Œå¸Œæœ›å¹³éœæ¥å—ã€‚", score: { N: 1, I: 1 } },
          { text: "å¤§å«ä¸¦å¥”è·‘ï¼Œå¸Œæœ›èº«é«”æš–èµ·ä¾†ã€‚", score: { E: 1, F: 1 } },
          { text: "æ”¹è®Šè¨ˆç•«ï¼Œæ‰¾æœ€è¿‘çš„å®‰å…¨åœ°é»æ±‚æ´ã€‚", score: { S: 1, P: 1 } }
        ]
      },
      {
        text: "ä½ æ˜ç™½é€™å¯èƒ½æ˜¯æœ€å¾Œä¸€æ¬¡æ©Ÿæœƒï¼Œä½ æœƒï¼Ÿ",
        options: [
          { text: "éœéœç­‰å¾…ï¼Œå¸Œæœ›æœ‰äººç¶“éæ•‘ä½ ã€‚", score: { I: 1, N: 1 } },
          { text: "å†æ¬¡é»ç«ï¼Œå’¬ç‰™æ’ä¸‹å»ã€‚", score: { T: 1, J: 1 } },
          { text: "é è¿‘å‹•ç‰©æˆ–ä»»ä½•ç†±æºå–æš–ã€‚", score: { F: 1, S: 1 } },
          { text: "ä¸€æ­¥æ­¥å‰é€²ï¼Œå“ªæ€•åªå‰©æœ€å¾Œä¸€çµ²åŠ›æ°£ã€‚", score: { E: 1, P: 1 } }
        ]
      }
    ];

    const quizDiv = document.getElementById('quiz');
    const submitBtn = document.getElementById('submitBtn');
    const resultDiv = document.getElementById('result');
    const typeText = document.getElementById('typeText');
    const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

    questions.forEach((q, i) => {
      const qDiv = document.createElement('div');
      qDiv.className = 'mb-4';
      qDiv.innerHTML = `<p class="font-semibold">${i + 1}. ${q.text}</p>`;
      q.options.forEach((opt, j) => {
        const id = `q${i}_opt${j}`;
        qDiv.innerHTML += `
          <div>
            <input type="radio" name="q${i}" id="${id}" value="${j}" class="mr-2">
            <label for="${id}">${opt.text}</label>
          </div>`;
      });
      quizDiv.appendChild(qDiv);
    });

    quizDiv.addEventListener('change', () => {
      const allAnswered = questions.every((_, i) => {
        return document.querySelector(`input[name='q${i}']:checked`);
      });
      submitBtn.classList.toggle('hidden', !allAnswered);
    });

    submitBtn.addEventListener('click', () => {
      questions.forEach((q, i) => {
        const choice = document.querySelector(`input[name='q${i}']:checked`).value;
        const scoreObj = q.options[choice].score;
        for (const key in scoreObj) {
          scores[key] += scoreObj[key];
        }
      });

      const labels = ['E/I', 'S/N', 'T/F', 'J/P'];
      const radarData = {
        labels,
        datasets: [{
          label: 'MBTI å‚¾å‘',
          data: [
            scores.E - scores.I,
            scores.S - scores.N,
            scores.T - scores.F,
            scores.J - scores.P
          ].map(x => (x + 3) * 10),
          backgroundColor: 'rgba(59, 130, 246, 0.2)',
          borderColor: 'rgba(59, 130, 246, 1)',
          borderWidth: 2
        }]
      };

      new Chart(document.getElementById('radarChart'), {
        type: 'radar',
        data: radarData,
        options: {
          scales: {
            r: {
              suggestedMin: 0,
              suggestedMax: 60
            }
          }
        }
      });

      const type = `${scores.I > scores.E ? 'I' : 'E'}${scores.S > scores.N ? 'S' : 'N'}${scores.T > scores.F ? 'T' : 'F'}${scores.J > scores.P ? 'J' : 'P'}`;
      let style = '';
      if (type[0] === 'E' && type[3] === 'P') {
        style = 'ğŸ§­ å†’éšªå‹ç”Ÿå­˜è€…ï¼šä½ å‹‡æ–¼è¡Œå‹•ã€é©æ‡‰åŠ›å¼·ï¼Œé¢å°æ¥µç«¯ç’°å¢ƒä¹Ÿä¸è¼•è¨€æ”¾æ£„ã€‚';
      } else if (type[0] === 'I' && type[3] === 'J') {
        style = 'ğŸ” è¬¹æ…å‹è¦åŠƒè€…ï¼šä½ å–œæ­¡è¨ˆç•«å‘¨å…¨ï¼Œç©©æ‰ç©©æ‰“ï¼Œé‡åˆ°å›°å¢ƒä¹Ÿæœƒå†·éœåˆ†æã€‚';
      } else if (type[2] === 'T' && type[3] === 'J') {
        style = 'ğŸ”¥ å …æ¯…å‹æ±‚ç”Ÿè€…ï¼šä½ é‚è¼¯æ¸…æ™°ã€æœ‰åŸ·è¡ŒåŠ›ï¼Œæ˜¯å±æ©Ÿä¸­å€¼å¾—ä¿¡è³´çš„é ˜å°è€…ã€‚';
      } else if (type[2] === 'F') {
        style = 'ğŸŒ² æ„Ÿæ€§å‹å€–å­˜è€…ï¼šä½ é‡è¦–æƒ…æ„Ÿèˆ‡ç›´è¦ºï¼Œé›–å¯èƒ½ä¸å¤ ç†æ€§ï¼Œä½†ä½ çš„äººæ€§å…‰è¼å¸¸æˆç‚ºé—œéµã€‚';
      } else {
        style = 'â“ å¤šé¢å‘çš„ç”Ÿå­˜è€…ï¼šä½ å…·æœ‰å¤šå…ƒçš„é©æ‡‰æ–¹å¼ï¼Œæˆ–è¨±èƒ½åœ¨æ„æƒ³ä¸åˆ°çš„æƒ…å¢ƒä¸­æ´»ä¸‹ä¾†ã€‚';
      }
      typeText.innerText = `ä½ çš„ MBTI å‚¾å‘æ˜¯ ${type}\n${style}`;

      resultDiv.classList.remove('hidden');
      submitBtn.disabled = true;
    });
  </script>

  <script>
    // ä¸‹é›ªå‹•ç•«
    const canvas = document.querySelector('.snow');
    const ctx = canvas.getContext('2d');
    let width, height;
    let snowflakes = [];

    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    }

    function createSnowflakes() {
      const x = Math.random() * width;
      const y = Math.random() * height;
      const radius = Math.random() * 4 + 1;
      const speed = Math.random() * 1 + 0.5;
      snowflakes.push({ x, y, radius, speed });
    }

    function drawSnowflakes() {
      ctx.clearRect(0, 0, width, height);
      ctx.fillStyle = 'white';
      ctx.beginPath();
      for (const flake of snowflakes) {
        ctx.moveTo(flake.x, flake.y);
        ctx.arc(flake.x, flake.y, flake.radius, 0, Math.PI * 2);
      }
      ctx.fill();
      updateSnowflakes();
    }

    function updateSnowflakes() {
      for (const flake of snowflakes) {
        flake.y += flake.speed;
        if (flake.y > height) {
          flake.y = -flake.radius;
          flake.x = Math.random() * width;
        }
      }
    }

    function loop() {
      drawSnowflakes();
      requestAnimationFrame(loop);
    }

    window.addEventListener('resize', resize);
    resize();
    setInterval(createSnowflakes, 100);
    loop();
  </script>
</body>
</html>
